<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width, initial-scale=1"> <title>New Widgets Part 1 | Cabbage Audio</title> <meta name=description content="Cabbage is a framework for audio software development. Using simple markup text and the Csound audio synthesis language users can target four major operating..."> <link rel=canonical href="index.html"> <link rel=alternate type=application/rss+xml title="Cabbage Audio" href=http://cabbageaudio.com/feed.xml> <link rel=apple-touch-icon sizes=57x57 href=http://cabbageaudio.com/apple-touch-icon-57x57.png> <link rel=apple-touch-icon sizes=60x60 href=http://cabbageaudio.com/apple-touch-icon-60x60.png> <link rel=apple-touch-icon sizes=72x72 href=http://cabbageaudio.com/apple-touch-icon-72x72.png> <link rel=apple-touch-icon sizes=76x76 href=http://cabbageaudio.com/apple-touch-icon-76x76.png> <link rel=apple-touch-icon sizes=114x114 href=http://cabbageaudio.com/apple-touch-icon-114x114.png> <link rel=apple-touch-icon sizes=120x120 href=http://cabbageaudio.com/apple-touch-icon-120x120.png> <link rel=apple-touch-icon sizes=144x144 href=http://cabbageaudio.com/apple-touch-icon-144x144.png> <link rel=apple-touch-icon sizes=152x152 href=http://cabbageaudio.com/apple-touch-icon-152x152.png> <link rel=apple-touch-icon sizes=180x180 href=http://cabbageaudio.com/apple-touch-icon-180x180.png> <link rel=icon type=image/png href=http://cabbageaudio.com/favicon-32x32.png sizes=32x32> <link rel=icon type=image/png href=http://cabbageaudio.com/favicon-194x194.png sizes=194x194> <link rel=icon type=image/png href=http://cabbageaudio.com/favicon-96x96.png sizes=96x96> <link rel=icon type=image/png href=http://cabbageaudio.com/android-chrome-192x192.png sizes=192x192> <link rel=icon type=image/png href=http://cabbageaudio.com/favicon-16x16.png sizes=16x16> <link rel=manifest href=http://cabbageaudio.com/manifest.json> <link rel=mask-icon href=http://cabbageaudio.com/safari-pinned-tab.svg color=#93d200> <meta name=apple-mobile-web-app-title content="Cabbage Audio"> <meta name=application-name content="Cabbage Audio"> <meta name=msapplication-TileColor content=#24b1f2> <meta name=msapplication-TileImage content=http://cabbageaudio.com/mstile-144x144.png> <meta name=theme-color content=#0391d1> <link rel=stylesheet href="../../styles/main.css"> </head> <body class=docs> <div class=wrapper> <header class=navigation role=banner> <div class=navigation-wrapper> <a href="http://cabbageaudio.com/" class=logo-header> <img src="../../images/cabbage_transparent.svg" alt="Cabbage Logo"> </a> <a href=javascript:void(0) class=navigation-menu-button id=js-mobile-menu>MENU</a> <nav role=navigation> <ul id=js-navigation-menu class="navigation-menu show"> <li class=nav-link> <a href="http://cabbageaudio.com/" title=Home>Home</a> </li> <li class=nav-link> <a href=http://cabbageaudio.com/#features title=Features>Features</a> </li> <li class=nav-link> <a href="http://cabbageaudio.com/download/" title=Download>Download</a> </li> <li class="nav-link more"> <a href="http://cabbageaudio.com/" title=Learning>Learning</a> <ul class=submenu> <li> <a href="../introduction/index.html" title=Docs>Docs</a> </li> <li> <a href="http://cabbageaudio.com/tutorials/" title=Videos>Videos</a> </li> </ul> </li> <li class=nav-link> <a href="http://cabbageaudio.com/faq/" title=FAQ>FAQ</a> </li> <li class=nav-link> <a href=http://forum.cabbageaudio.com title=Forum target=_blank>Forum</a> </li> </ul> </nav> </div> </header> <!--[if lt IE 11]>
 <p class="browserupgrade">You are using an <strong>outdated</strong> browser. The CabbageAudio site may not display correctly. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
 <![endif]--> <aside class=doc-nav> <nav role=navigation id=doc-menu> <h3>Cabbage Docs</h3> <hr> <ul> <li> <a href=http://cabbageaudio.com/docs/intro class=sub-menu-trigger> <i class=icon-right-open></i>&nbsp; Quickstart </a> <ul class=submenu> <li><a href="../introduction/index.html">Introduction</a></li> <li><a href="../standalone_host/index.html">Standalone Host</a></li> <li><a href="../first_synth/index.html">First Synth</a></li> <li><a href="../controlling/index.html">Controlling</a></li> <li><a href="../first_effect/index.html">First Effect</a></li> <li><a href="../exporting/index.html">Exporting</a></li> <li><a href="../distributing/index.html">Distributing</a></li> <li><a href="../cabbage_studio/index.html">Cabbage Studio</a></li> <li><a href="../android/index.html">Android</a></li> <li><a href="../cabbage_audio_unit/index.html">Cabbage Audio Unit</a></li> </ul> </li> </ul> <ul> <li> <a href=http://cabbageaudio.com class=sub-menu-trigger> <i class=icon-right-open></i>&nbsp; Cabbage Widgets </a> <ul class=submenu> <li><a href="../cabbage_syntax/index.html">Cabbage Syntax</a></li> <li><a href="../button/index.html">Button</a></li> <li><a href="../button_file/index.html">Button File</a></li> <li><a href="../button_info/index.html">Button Info</a></li> <li><a href="../checkbox/index.html">Checkbox</a></li> <li><a href="../combobox/index.html">Combobox</a></li> <li><a href="../csound_output/index.html">Csound Output</a></li> <li><a href="../encoder/index.html">Encoder</a></li> <li><a href="../gentable/index.html">Gentable</a></li> <li><a href="../hrange/index.html">Hrange</a></li> <li><a href="../fftdisplay/index.html">Fftdisplay</a></li> <li><a href="../form/index.html">Form</a></li> <li><a href="../groupbox/index.html">Groupbox</a></li> <li><a href="../image/index.html">Image</a></li> <li><a href="../keyboard/index.html">Keyboard</a></li> <li><a href="../label/index.html">Label</a></li> <li><a href="../numberbox/index.html">Numberbox</a></li> <li><a href="../sliders/index.html">Sliders</a></li> <li><a href="../soundfiler/index.html">Soundfiler</a></li> <li><a href="../table/index.html">Table</a></li> <li><a href="../textbox/index.html">Textbox</a></li> <li><a href="../texteditor/index.html">Texteditor</a></li> <li><a href="../vrange/index.html">Vrange</a></li> <li><a href="../xypad/index.html">Xypad</a></li> </ul> </li> </ul> <ul> <li> <a href=http://cabbageaudio.com class=sub-menu-trigger> <i class=icon-right-open></i>&nbsp; Extras </a> <ul class=submenu> <li><a href="../identchannels/index.html">Identchannels</a></li> <li><a href="../plants/index.html">Plants</a></li> <li><a href="../presets/index.html">Presets</a></li> <li><a href="../gui_designer/index.html">Gui Designer</a></li> <li><a href="../widget_arrays/index.html">Widget Arrays</a></li> <li><a href="../managing_large_numbers_of_widgets/index.html">Managing Large Numbers Of Widgets</a></li> <li><a href="../macros_and_reserved_channels/index.html">Macros And Reserved Channels</a></li> <li><a href="../using_svgs/index.html">Using Svgs</a></li> </ul> </li> </ul> <ul> <li> <a href=http://cabbageaudio.com class=sub-menu-trigger> <i class=icon-right-open></i>&nbsp; Csound </a> <ul class=submenu> <li><a href="../csound_syntax/index.html">Csound Syntax</a></li> <li><a href="../keywords/index.html">Keywords</a></li> <li><a href="../contants_and_variables/index.html">Contants And Variables</a></li> <li><a href="../opcodes/index.html">Opcodes</a></li> <li><a href="../operators_and_comments/index.html">Operators And Comments</a></li> <li><a href="../beginner_synth/index.html">Beginner Synth</a></li> </ul> </li> </ul> <ul class=active-sub-item> <li> <a href=http://cabbageaudio.com class=sub-menu-trigger> <i class="icon-right-open active-sub-item"></i>&nbsp; Extending Cabbage </a> <ul class=submenu> <li class=current><a href="index.html">New Widgets Part 1</a></li> <li><a href="../new_widgets_part_2/index.html">New Widgets Part 2</a></li> <li><a href="../new_widgets_part_3/index.html">New Widgets Part 3</a></li> </ul> </li> </ul> </nav> </aside> <div class=doc-content> <i class="toggle-nav icon icon-menu">&#xe81b;</i> <div class=container> <article class=post>  <div class=post-content> <h1>New Widgets, Part 1</h1> <p>In order to add new widgets you will need to set up a Cabbage build, based on your chosen operating system. The simplest and quickest build system to set up is on Linux, even if it means installing Linux on a spare partition first! For the purpose of this quick guide, it is assumed that you already have a working build system for Cabbage. If you need assistance in setting up a build system please visit the Cabbage forum and ask there. This guide assumes a basic level of C++ on the part of the reader. A knowledge of JUCE and the Csound API is beneficial but not necessary. </p> <blockquote> <p>The sample widget described below is already part of the Cabbage code-base. All of the code presented and referenced below can be found in the Cabbage source. </p> </blockquote> <h3>A basic widget class.</h3> <p>All custom widgets classes must declared in CabbageCustomWidgets.h, while all function definitions should be implemented in the CabbageCustomWidgets.cpp. If you scroll towards the bottom of CabbageCustomWidgets.h you will see where the sample stepper widget is declared. You can add any new widgets directly after this declaration. Before declaring our new widget, it is worth looking at some of the files CabbageCustomWidgets.h includes. </p> <div class=highlight><pre><code class=language-csharp data-lang=csharp><span class=err>#</span><span class=n>include</span> <span class=s>"../JuceLibraryCode/JuceHeader.h"</span>
<span class=err>#</span><span class=n>include</span> <span class=s>"CabbageLookAndFeel.h"</span>
<span class=err>#</span><span class=n>include</span> <span class=s>"CabbageUtils.h"</span>
<span class=err>#</span><span class=n>include</span> <span class=s>"CabbageGUIClass.h"</span>
</code></pre></div> <p>The CabbageLookAndFeel file contains methods for painting components with a set look and feel. If your new widget uses any existing widgets such as sliders, buttons, comboboxes, etc, it is advised to use the CabbageLookAndFeel class to skin them in a way that is consistent to Cabbage. The CabbageUtils class contains several static methods that can be use for debugging and various other utility operations. The CabbageGUIType class, which is discussed in more detail later, is an abstract data type that holds information about the various attributes of a widget. </p> <p>Your new widget class constructor, located towards the end of CabbageCustomWidgets.h can derive from any of JUCE&#39;s main GUI classes. The base class for all GUI widgets in JUCE is the Component class. Our simple class will inherit from this base class and in most cases will need a <code>paint()</code> method for drawing the component and an <code>update(...)</code> method for updating our widget from Csound. A very basic widget class might look like this. </p> <div class=highlight><pre><code class=language-csharp data-lang=csharp><span class=k>class</span> <span class=nc>CabbageStepper</span>    <span class=p>:</span>   <span class=k>public</span> <span class=n>Component</span>
<span class=p>{</span>
<span class=n>String</span> <span class=n>name</span><span class=p>;</span>
<span class=kt>int</span> <span class=n>numberOfSteps</span><span class=p>,</span> <span class=n>tempo</span><span class=p>;</span>
<span class=n>Colour</span> <span class=n>colour</span><span class=p>,</span> <span class=n>backgroundColour</span>

<span class=k>public</span><span class=p>:</span>

    <span class=nf>CabbageStepper</span> <span class=p>(</span><span class=n>CabbageGUIType</span> <span class=p>&amp;</span><span class=n>cAttr</span><span class=p>,</span> <span class=n>CabbagePluginAudioProcessorEditor</span><span class=p>*</span> <span class=n>_owner</span><span class=p>)</span>
        <span class=p>:</span> <span class=nf>Component</span><span class=p>(),</span> 
        <span class=nf>owner</span><span class=p>(</span><span class=n>_owner</span><span class=p>)</span>
    <span class=p>{}</span>

    <span class=p>~</span><span class=nf>CabbageStepper</span><span class=p>()</span>
    <span class=p>{}</span>

    <span class=k>void</span> <span class=nf>paint</span><span class=p>(</span><span class=n>Graphics</span><span class=p>&amp;</span> <span class=n>g</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=n>g</span><span class=p>.</span><span class=nf>fillAll</span><span class=p>(</span><span class=n>Colours</span><span class=p>::</span><span class=n>red</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=k>void</span> <span class=nf>update</span><span class=p>(</span><span class=n>CabbageGUIType</span> <span class=n>m_cAttr</span><span class=p>){}</span>

<span class=k>private</span><span class=p>:</span>
    <span class=n>CabbagePluginAudioProcessorEditor</span><span class=p>*</span> <span class=n>owner</span><span class=p>;</span>

    <span class=nf>JUCE_DECLARE_NON_COPYABLE_WITH_LEAK_DETECTOR</span> <span class=p>(</span><span class=n>CabbageStepper</span><span class=p>);</span>
<span class=p>};</span>

<span class=cp>#endif
</span></code></pre></div> <blockquote> <p>In order to keep things as clear as possible for this particular tutorial, I&#39;ve included member method definitions within the class declaration. In reality however, function definitions should always reside in CabbageCustomWidgets.cpp, otherwise you will have problems with forward declarations and circular dependencies. </p> </blockquote> <p>Each Cabbage widget gets passed a <code>CabbageGUIType</code> object. CabbageGUIType objects are created and instantiated based on lines of text in the Cabbage section of your code. Each CabbageGUIType object contains information about a particular widget, such as size, colour, position, etc. The <code>CabbageGUIType</code> class contains several methods for accessing a widget&#39;s properties. The simplest of these methods are:</p> <div class=highlight><pre><code class=language-csharp data-lang=csharp><span class=kt>float</span> <span class=nf>getNumProp</span><span class=p>(</span><span class=n>Identifier</span> <span class=n>prop</span><span class=p>);</span>
<span class=n>String</span> <span class=nf>getStringProp</span><span class=p>(</span><span class=n>Identifier</span> <span class=n>prop</span><span class=p>);</span>
</code></pre></div> <p>These two methods, used extensively throughout the entire Cabbage code-base, can be passed strings that name the identifier you wish to access. For example, if you wanted users to be able to use a colour() identifier to set the colour of a new widget you could do something like this:</p> <div class=highlight><pre><code class=language-csharp data-lang=csharp><span class=p>(...)</span>
<span class=n>Colour</span> <span class=n>widgetColour</span><span class=p>;</span>
<span class=k>public</span><span class=p>:</span>
    <span class=nf>CabbageStepper</span> <span class=p>(</span><span class=n>CabbageGUIType</span> <span class=p>&amp;</span><span class=n>cAttr</span><span class=p>,</span> <span class=n>CabbagePluginAudioProcessorEditor</span><span class=p>*</span> <span class=n>_owner</span><span class=p>)</span>
        <span class=p>:</span> <span class=nf>Component</span><span class=p>(),</span> 
        <span class=nf>owner</span><span class=p>(</span><span class=n>_owner</span><span class=p>)</span>   
    <span class=p>{</span>
        <span class=n>widgetColour</span> <span class=p>=</span> <span class=n>Colour</span><span class=p>::</span><span class=nf>fromString</span><span class=p>(</span><span class=n>cAttr</span><span class=p>.</span><span class=nf>getStringProp</span><span class=p>(</span><span class=s>"colour"</span><span class=p>));</span>
    <span class=p>}</span>

    <span class=k>void</span> <span class=nf>paint</span><span class=p>(</span><span class=n>Graphics</span><span class=p>&amp;</span> <span class=n>g</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=n>g</span><span class=p>.</span><span class=nf>fillAll</span><span class=p>(</span><span class=n>widgetColour</span><span class=p>);</span>
    <span class=p>}</span>    
</code></pre></div> <p>The second parameter to be passed to any new widget is a CabbagePluginAudioProcessorEditor object. This object will provide you with access to the plugin&#39;s processor class, as well as the underlying instance of Csound. We will see more on this in part 2 when we return to our simple class and add some functionality to it.</p> <h3>Parsing the Cabbage code for a new widget</h3> <p>In order to make the above widget appear on our plugin GUI window we need to make a few additions to a number of Cabbage source files. Every line of code in the <cabbage> section of a user&#39;s .csd file is read sequentially in the <code>CabbageAudioPluginProcessor::initialiseWidgets(...)</code> method found in CabbageAudioPluginProcessor.cpp. This function iterates through two arrays, defined in CabbageGUIClass.h, that contains the names of each and every valid Cabbage widgets. Widgets are split into two categories. Those that can be automated by a host DAW, generally referred to a <code>guiCtrls</code>, and those that are controlled only through the plugin&#39;s GUI, generally referred to as <code>layoutCtrls</code>. You&#39;ll see that <em>stepper</em> has been added to the GUILayoutCtrls array in CabbageGUIClass.h. The names of any new widgets should be added to these arrays. </cabbage></p> <h3>Creating an instance of a widget</h3> <p>If Cabbage finds a widget type when parsing the user code, it makes a call to the <code>CabbagePluginAudioProcessorEditor::InsertGUIControls(...)</code> method, passing it a unique CabbageGUIType object. Each CabbageGUIType object passed to this function contains information about that widget&#39;s attributes and properties. This method then calls a corresponding InsertWidget() method that is responsible for instantiating and displaying the widget in the plugin editor window. You will see in this method there is a call to an <code>InsertStepper(...)</code> method. Each new widget will need a new <code>CabbagePluginAudioProcessorEditor::Insert...()</code> method implementation and declaration. Don&#39;t forget to declare the method in CabbagePluginAudioProcesorEditor.h, otherwise you will get build errors when compiling. </p> <p>Out simple <code>InsertStepper(...)</code> method looks like this.</p> <div class=highlight><pre><code class=language-csharp data-lang=csharp><span class=k>void</span> <span class=n>CabbagePluginAudioProcessorEditor</span><span class=p>::</span><span class=nf>InsertStepper</span><span class=p>(</span><span class=n>CabbageGUIType</span> <span class=p>&amp;</span><span class=n>cAttr</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>CabbageStepper</span><span class=p>*</span> <span class=n>stepper</span> <span class=p>=</span> <span class=k>new</span> <span class=nf>CabbageStepper</span><span class=p>(</span><span class=n>cAttr</span><span class=p>,</span> <span class=k>this</span><span class=p>);</span>

    <span class=kt>float</span> <span class=n>left</span> <span class=p>=</span> <span class=n>cAttr</span><span class=p>.</span><span class=nf>getNumProp</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>left</span><span class=p>);</span>
    <span class=kt>float</span> <span class=n>top</span> <span class=p>=</span> <span class=n>cAttr</span><span class=p>.</span><span class=nf>getNumProp</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>top</span><span class=p>);</span>
    <span class=kt>float</span> <span class=n>width</span> <span class=p>=</span> <span class=n>cAttr</span><span class=p>.</span><span class=nf>getNumProp</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>width</span><span class=p>);</span>
    <span class=kt>float</span> <span class=n>height</span> <span class=p>=</span> <span class=n>cAttr</span><span class=p>.</span><span class=nf>getNumProp</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>height</span><span class=p>);</span>

    <span class=c1>//if control is not part of a plant, add mouse listener
</span>    <span class=k>if</span><span class=p>(</span><span class=n>cAttr</span><span class=p>.</span><span class=nf>getStringProp</span><span class=p>(</span><span class=s>"plant"</span><span class=p>).</span><span class=nf>isEmpty</span><span class=p>())</span>
        <span class=n>stepper</span><span class=p>-&gt;</span><span class=nf>addMouseListener</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>

    <span class=n>stepper</span><span class=p>-&gt;</span><span class=nf>setVisible</span><span class=p>((</span><span class=n>cAttr</span><span class=p>.</span><span class=nf>getNumProp</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>visible</span><span class=p>)==</span><span class=m>1</span> <span class=p>?</span> <span class=k>true</span> <span class=p>:</span> <span class=k>false</span><span class=p>));</span>
    <span class=n>stepper</span><span class=p>-&gt;</span><span class=nf>getProperties</span><span class=p>().</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>index</span><span class=p>,</span> <span class=n>layoutComps</span><span class=p>.</span><span class=nf>size</span><span class=p>());</span>

    <span class=n>layoutComps</span><span class=p>.</span><span class=k>add</span><span class=p>(</span><span class=n>stepper</span><span class=p>);</span>
    <span class=kt>int</span> <span class=n>idx</span> <span class=p>=</span> <span class=n>layoutComps</span><span class=p>.</span><span class=nf>size</span><span class=p>()-</span><span class=m>1</span><span class=p>;</span>
    <span class=n>layoutComps</span><span class=p>[</span><span class=n>idx</span><span class=p>]-&gt;</span><span class=nf>getProperties</span><span class=p>().</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>lineNumber</span><span class=p>,</span> <span class=n>cAttr</span><span class=p>.</span><span class=nf>getNumProp</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>lineNumber</span><span class=p>));</span>
    <span class=nf>setPositionOfComponent</span><span class=p>(</span><span class=n>left</span><span class=p>,</span> <span class=n>top</span><span class=p>,</span> <span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>,</span> <span class=n>layoutComps</span><span class=p>[</span><span class=n>idx</span><span class=p>],</span> <span class=n>cAttr</span><span class=p>.</span><span class=nf>getStringProp</span><span class=p>(</span><span class=s>"reltoplant"</span><span class=p>));</span>
    <span class=n>cAttr</span><span class=p>.</span><span class=nf>setStringProp</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>type</span><span class=p>,</span> <span class=s>"label"</span><span class=p>);</span>
<span class=p>}</span>
</code></pre></div> <p>Any new <code>Insert(...)</code> method will need to do the following:</p> <ul> <li>call the new widget&#39;s class constructor and pass it a cAttr object and a pointer the CabbagePluginAudioProcessorEditor class </li> <li>add a mouse listener if the widget has not been added to a plant abstraction</li> <li>set the line number associated with the particular widget</li> <li>set whether it is visible or not</li> <li>give the widget a unique index ID</li> <li>add the widget to the <code>comps</code> or <code>layoutComps</code> array. These OwnedArrays are responsible for managing all GUI components that are added to your plugin&#39;s editor. </li> <li>set the position and parent of the widget by calling <code>setPositionOfComponent(...)</code></li> </ul> <p>There is one final step to be taken before Cabbage will successfully create our new widget type. That is to set up all default parameters for our new widget. Widgets must have default parameters set so that users don&#39;t have to set each one themselves in their code. This ensures each line of Cabbage code can be a succinct as possible. To add default parameters for your new widget type you will need to add some code to the CabbageGUIType class constructor. Here is what needs to be added to the CabbageGUIType constructor in CabbageGUIClass.h in order to create default parameters for our new <em>stepper</em> widget.</p> <div class=highlight><pre><code class=language-csharp data-lang=csharp>    <span class=c1>//===============stepper==================//
</span>    <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>strTokens</span><span class=p>[</span><span class=m>0</span><span class=p>].</span><span class=nf>trim</span><span class=p>()</span> <span class=p>==</span> <span class=s>"stepper"</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=s>"basetype"</span><span class=p>,</span> <span class=s>"layout"</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>top</span><span class=p>,</span> <span class=m>10</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>left</span><span class=p>,</span> <span class=m>10</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>width</span><span class=p>,</span> <span class=m>160</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>height</span><span class=p>,</span> <span class=m>2</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>colour</span><span class=p>,</span> <span class=n>Colours</span><span class=p>::</span><span class=n>white</span><span class=p>.</span><span class=nf>toString</span><span class=p>());</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>type</span><span class=p>,</span> <span class=s>"stepper"</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>name</span><span class=p>,</span> <span class=s>"stepper"</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>name</span><span class=p>,</span> <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=nf>getWithDefault</span><span class=p>(</span><span class=s>"name"</span><span class=p>,</span> <span class=s>""</span><span class=p>).</span><span class=nf>toString</span><span class=p>()+</span><span class=nf>String</span><span class=p>(</span><span class=n>ID</span><span class=p>));</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>identchannel</span><span class=p>,</span> <span class=s>""</span><span class=p>);</span>
        <span class=n>cabbageIdentifiers</span><span class=p>.</span><span class=k>set</span><span class=p>(</span><span class=n>CabbageIDs</span><span class=p>::</span><span class=n>visible</span><span class=p>,</span> <span class=m>1</span><span class=p>);</span>
    <span class=p>}</span>
</code></pre></div> <p>After building Cabbage with all the additions and modification described above we are ready to test our new widget. For this we just need to create a new Cabbage file that adds a stepper widget:</p> <div class=highlight><pre><code class=language-csharp data-lang=csharp><span class=p>&lt;</span><span class=n>Cabbage</span><span class=p>&gt;</span>
<span class=n>form</span> <span class=nf>size</span><span class=p>(</span><span class=m>300</span><span class=p>,</span> <span class=m>150</span><span class=p>),</span> <span class=nf>caption</span><span class=p>(</span><span class=s>"New Widget"</span><span class=p>),</span> <span class=nf>pluginID</span><span class=p>(</span><span class=s>"plu1"</span><span class=p>),</span> <span class=nf>colour</span><span class=p>(</span><span class=m>57</span><span class=p>,</span> <span class=m>110</span><span class=p>,</span> <span class=m>185</span><span class=p>)</span>
<span class=n>stepper</span> <span class=nf>bounds</span><span class=p>(</span><span class=m>10</span><span class=p>,</span> <span class=m>10</span><span class=p>,</span> <span class=m>280</span><span class=p>,</span> <span class=m>80</span><span class=p>),</span> <span class=nf>colour</span><span class=p>(</span><span class=s>"green"</span><span class=p>)</span>
<span class=p>&lt;/</span><span class=n>Cabbage</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=n>CsoundSynthesizer</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=n>CsOptions</span><span class=p>&gt;</span> 
<span class=p>-</span><span class=n>m0d</span>
<span class=p>&lt;/</span><span class=n>CsOptions</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=n>CsInstruments</span><span class=p>&gt;</span>
<span class=n>sr</span> <span class=p>=</span> <span class=m>44100</span>
<span class=n>ksmps</span> <span class=p>=</span> <span class=m>16</span>
<span class=n>nchnls</span> <span class=p>=</span> <span class=m>2</span>
<span class=m>0d</span><span class=n>bfs</span><span class=p>=</span><span class=m>1</span>

<span class=n>instr</span> <span class=m>1</span>
<span class=p>;</span><span class=k>do</span> <span class=n>stuff</span>
<span class=n>endin</span>

<span class=p>&lt;/</span><span class=n>CsInstruments</span><span class=p>&gt;</span>  
<span class=p>&lt;</span><span class=n>CsScore</span><span class=p>&gt;</span>
<span class=n>i1</span> <span class=m>0</span> <span class=m>5000</span>
<span class=p>&lt;/</span><span class=n>CsScore</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=n>CsoundSynthesizer</span><span class=p>&gt;</span>
</code></pre></div> <p>The new widget will now appear in your plugin editor window.</p> <p><img src="../../images/docs/newWidgetScreen1.png"></p> </div> </article> <div class=doc-link-wrapper> <a href="../beginner_synth/index.html" class="doc-link left-link" title="Previous Doc"><i class="icon icon-left-open"></i></a> <a href="../new_widgets_part_2/index.html" class="doc-link right-link" title="Next Doc"><i class="icon icon-right-open"></i></a> </div> <div class=clear></div> </div> </div> </div> <a href="index.html#0" class=back-to-top></a> <script src="../../scripts/vendor.js"></script> <script src="../../scripts/main.js"></script>  <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='https://www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-74283643-1');ga('send','pageview');
    </script> </body> </html> 